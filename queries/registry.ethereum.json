{
  "version": "1.0",
  "description": "Ethereum query metadata registry",
  "queries": [
    {
      "name": "lending_action_ledger_morpho",
      "file": "queries/ethereum/lending/lending_action_ledger_morpho.sql",
      "dune_query_id": 6708253,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_morpho_smoke.sql",
      "dependencies": [],
      "description": "Unified action ledger for Morpho Aave V2 lending events"
    },
    {
      "name": "lending_action_ledger_aave_v3",
      "file": "queries/ethereum/lending/lending_action_ledger_aave_v3.sql",
      "dune_query_id": 6707805,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_aave_v3_smoke.sql",
      "dependencies": [],
      "description": "Unified action ledger for Aave V3 lending events"
    },
    {
      "name": "lending_action_ledger_unified",
      "file": "queries/ethereum/lending/lending_action_ledger_unified.sql",
      "dune_query_id": 6687961,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_action_ledger_unified_smoke.sql",
      "dependencies": [],
      "description": "Multi-protocol unified stablecoin action ledger (Aave V3, Morpho Blue, Compound V3, Compound V2) with amounts, prices, and liquidations"
    },
    {
      "name": "lending_entity_balance_sheet",
      "file": "queries/ethereum/lending/lending_entity_balance_sheet.sql",
      "dune_query_id": 6708623,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_entity_balance_sheet_smoke.sql",
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Per-entity balance sheets with collateral and debt positions"
    },
    {
      "name": "lending_flow_stitching",
      "file": "queries/ethereum/lending/lending_flow_stitching.sql",
      "dune_query_id": 6690272,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_flow_stitching_smoke.sql",
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Cross-protocol flow detection (borrow->transfer->supply). Materialized with incremental processing to break inline chain for downstream queries."
    },
    {
      "name": "lending_loop_detection",
      "file": "queries/ethereum/lending/lending_loop_detection.sql",
      "dune_query_id": 6702204,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_loop_detection_smoke.sql",
      "dependencies": [
        "lending_flow_stitching"
      ],
      "description": "Multi-hop lending loop detection using window functions (islands-and-gaps). Supports arbitrary hop depth with uniform 1-hour temporal constraint."
    },
    {
      "name": "lending_loop_metrics_daily",
      "file": "queries/ethereum/lending/lending_loop_metrics_daily.sql",
      "dune_query_id": 6708794,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_loop_metrics_daily_smoke.sql",
      "dependencies": [
        "lending_loop_detection",
        "lending_flow_stitching"
      ],
      "description": "Daily aggregated metrics for lending loop activity"
    },
    {
      "name": "lending_sankey_flows",
      "file": "queries/ethereum/lending/lending_sankey_flows.sql",
      "dune_query_id": 6708650,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_sankey_flows_smoke.sql",
      "dependencies": [
        "lending_flow_stitching"
      ],
      "description": "Edge list dataset for Sankey diagram visualization"
    },
    {
      "name": "lending_entity_loop_storyboard",
      "file": "queries/ethereum/lending/lending_entity_loop_storyboard.sql",
      "dune_query_id": 6708643,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_entity_loop_storyboard_smoke.sql",
      "dependencies": [
        "lending_action_ledger_unified"
      ],
      "description": "Time-ordered per-entity loop traces with running totals"
    },
    {
      "name": "lending_collateral_ledger",
      "file": "queries/ethereum/lending/lending_collateral_ledger.sql",
      "dune_query_id": 6707791,
      "type": "base",
      "architecture": "v2",
      "smoke_test": "tests/lending_collateral_ledger_smoke.sql",
      "dependencies": [],
      "description": "Multi-protocol collateral event ledger (WBTC, WETH, wstETH, weETH, rETH, cbETH) tracking what backs stablecoin borrows"
    },
    {
      "name": "lending_loop_collateral_profile",
      "file": "queries/ethereum/lending/lending_loop_collateral_profile.sql",
      "dune_query_id": 6708668,
      "type": "nested",
      "architecture": "v2",
      "smoke_test": "tests/lending_loop_collateral_profile_smoke.sql",
      "dependencies": [
        "lending_flow_stitching",
        "lending_collateral_ledger"
      ],
      "description": "Joins cross-protocol flows with collateral positions to segment loop activity by backing asset (BTC vs ETH vs LST)"
    }
  ]
}
